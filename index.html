<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>The Greats ‚Äî S√≥ os melhores</title>
  <style>
    /* ---------- ESTILO ---------- */
    body {
      font-family: 'Inter', Arial, sans-serif;
      margin: 0;
      background-color: #0e1117;
      color: #eee;
    }
    header {
      text-align: center;
      background: linear-gradient(90deg, #111, #1a1a1a);
      padding: 20px;
      border-bottom: 1px solid #333;
    }
    h1 {
      margin: 0;
      font-size: 1.8rem;
      color: gold;
    }
    main {
      max-width: 800px;
      margin: 20px auto;
      padding: 10px;
    }
    #form-section {
      background: #181c24;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px #0005;
      margin-bottom: 25px;
    }
    #form-section input, select, button {
      padding: 10px;
      border-radius: 8px;
      border: none;
      margin: 5px;
      background: #222;
      color: #eee;
    }
    button {
      background: gold;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    #posts {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .post {
      background: #151820;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 6px #0003;
    }
    .post-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .post iframe {
      width: 100%;
      height: 315px;
      border-radius: 8px;
      border: none;
    }
    .vote {
      display: flex;
      gap: 10px;
      margin-top: 8px;
    }
    .vote button {
      background: #222;
      color: gold;
      border: 1px solid #333;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
    }
    footer {
      text-align: center;
      padding: 15px;
      border-top: 1px solid #333;
      color: #777;
      font-size: 0.9em;
    }
  </style>
</head>

<body>
  <header>
    <h1>üåü The Greats</h1>
    <p>Os melhores posts da internet, escolhidos por voc√™</p>
  </header>

  <main>
    <section id="form-section">
      <h2>Enviar um link</h2>
      <input id="url" type="url" placeholder="Cole o link do v√≠deo/post" />
      <select id="category">
        <option value="geral">Geral</option>
        <option value="m√∫sica">M√∫sica</option>
        <option value="humor">Humor</option>
        <option value="ci√™ncia">Ci√™ncia</option>
        <option value="esportes">Esportes</option>
      </select>
      <button id="add">Enviar</button>
    </section>

    <section id="feed">
      <h2>Os Grandes üî•</h2>
      <div id="posts"></div>
    </section>
  </main>

  <footer>
    <p>Feito com ‚ù§Ô∏è ‚Äî Projeto <b>The Greats</b> (prot√≥tipo)</p>
  </footer>

  <script>
    // ---------- L√ìGICA JAVASCRIPT ----------
    const urlInput = document.getElementById("url");
    const catSelect = document.getElementById("category");
    const addBtn = document.getElementById("add");
    const postsDiv = document.getElementById("posts");

    let posts = JSON.parse(localStorage.getItem("posts") || "[]");
    render();

    addBtn.onclick = () => {
      const url = urlInput.value.trim();
      const cat = catSelect.value;
      if (!url) return alert("Cole um link!");
      const id = Date.now();
      const source = detectSource(url);
      const post = { id, url, category: cat, up: 0, down: 0, source };
      posts.push(post);
      save();
      render();
      urlInput.value = "";
    };

    function detectSource(url) {
      if (url.includes("youtube")) return "youtube";
      if (url.includes("tiktok")) return "tiktok";
      if (url.includes("vimeo")) return "vimeo";
      if (url.includes("instagram")) return "instagram";
      return "link";
    }

    function save() {
      localStorage.setItem("posts", JSON.stringify(posts));
    }

    function render() {
      postsDiv.innerHTML = "";
      posts.sort((a, b) => (b.up - b.down) - (a.up - a.down));
      for (const p of posts) {
        const div = document.createElement("div");
        div.className = "post";
        div.innerHTML = `
          <div class="post-header">
            <span>üìÇ ${p.category}</span>
            <span>‚≠ê ${p.up - p.down}</span>
          </div>
          ${embed(p.url, p.source)}
          <div class="vote">
            <button onclick="vote(${p.id},1)">üëç</button>
            <button onclick="vote(${p.id},-1)">üëé</button>
            <a href="${p.url}" target="_blank">üîó Abrir</a>
          </div>
        `;
        postsDiv.appendChild(div);
      }
    }

    function vote(id, val) {
      const p = posts.find(x => x.id === id);
      if (!p) return;
      if (val === 1) p.up++; else p.down++;
      save();
      render();
    }

    function embed(url, source) {
      try {
        if (source === "youtube") {
          const id = new URL(url).searchParams.get("v") || url.split("/").pop();
          return `<iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>`;
        }
        if (source === "tiktok") {
          return `<blockquote class="tiktok-embed" cite="${url}">
                    <a href="${url}"></a>
                  </blockquote>`;
        }
        if (source === "vimeo") {
          const id = url.split("/").pop();
          return `<iframe src="https://player.vimeo.com/video/${id}" allowfullscreen></iframe>`;
        }
        if (source === "instagram") {
          return `<iframe src="${url}embed" allowfullscreen></iframe>`;
        }
      } catch (e) {}
      return `<a href="${url}" target="_blank">${url}</a>`;
    }
  </script>
</body>
</html>
