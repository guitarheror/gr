/* --- ESTILO GERAL --- */
body, html {
    margin: 0; padding: 0; width: 100%; height: 100%;
    overflow: hidden; background-color: #121212;
    font-family: 'Segoe UI', sans-serif; color: #e0e0e0;
}

/* SIDEBAR */
#sidebar {
    position: fixed; top: 0; left: 0; bottom: 0; width: 60px;
    background: #1e1e1e; border-right: 1px solid #333;
    display: flex; flex-direction: column; align-items: center; 
    padding-top: 20px; z-index: 2000; box-shadow: 2px 0 10px rgba(0,0,0,0.5);
}
.tool-btn {
    width: 40px; height: 40px; margin-bottom: 15px; border-radius: 8px;
    border: 1px solid transparent; background: #2c2c2c; color: #fff;
    font-size: 20px; cursor: pointer; transition: all 0.2s;
}
.tool-btn:hover { background: #333; border-color: #555; }

/* BREADCRUMBS */
#breadcrumbs {
    position: fixed; top: 15px; left: 80px; 
    z-index: 2001; font-size: 16px; font-weight: 500; color: #666;
    pointer-events: none;
}
.crumb {
    pointer-events: auto; cursor: pointer; color: #888; transition: color 0.2s;
}
.crumb:hover { color: #bb86fc; text-decoration: underline; }
.crumb.active { color: #e0e0e0; cursor: default; text-decoration: none; font-weight: bold;}
.crumb-separator { margin: 0 8px; color: #444; }

/* VIEWPORT */
#viewport {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    overflow: hidden; cursor: default;
    background-color: #121212;
    background-image: radial-gradient(circle, #333 1px, transparent 1px);
    background-size: 40px 40px; 
}
#world {
    position: absolute; top: 0; left: 0; width: 0; height: 0;
    overflow: visible; transform-origin: 0 0;
}

/* SVG DAS LINHAS (Agora com fill: none para curvas) */
#connections-layer {
    position: absolute; top: -50000px; left: -50000px; 
    width: 100000px; height: 100000px; 
    overflow: visible; pointer-events: none; z-index: 0;
}
/* Importante: fill: none para a curva não fechar */
.connector-line { 
    fill: none; 
    stroke: #666; 
    stroke-width: 3px; /* Um pouco mais grossa */
    stroke-linecap: round;
    /* Animação suave na cor */
    transition: stroke 0.2s;
}
.connector-line:hover { stroke: #bb86fc; }

/* CARDS */
.card {
    position: absolute; background: #1e1e1e; border: 1px solid #333;
    box-shadow: 0 10px 20px rgba(0,0,0,0.5); border-radius: 12px; padding: 20px;
    user-select: none; cursor: move; min-width: 150px; z-index: 1;
    transition: transform 0.1s, box-shadow 0.2s;
}
.card:hover { border-color: #555; }
.card.dragging { border-color: #bb86fc; z-index: 1000; cursor: grabbing; }
/* Permite editar o texto clicando */
.card h2, .card p { outline: none; } 
.card h2 { margin: 0 0 5px 0; font-size: 1rem; color: #fff; cursor: text; }
.card p { margin: 0; color: #888; font-size: 0.9rem; cursor: text; }

#hud {
    position: fixed; bottom: 20px; right: 20px;
    background: #1e1e1e; padding: 10px 15px; border-radius: 30px; border: 1px solid #333;
    font-size: 0.8rem; color: #666; pointer-events: none;
}

/* MENUS */
#context-menu, #connection-picker {
    display: none; position: fixed; background: #252525;
    border: 1px solid #444; border-radius: 8px; z-index: 5000;
}
#context-menu { box-shadow: 0 5px 15px rgba(0,0,0,0.5); padding: 5px 0; min-width: 150px; }
.menu-item { padding: 10px 20px; cursor: pointer; color: #e0e0e0; font-size: 0.9rem; }
.menu-item:hover { background: #bb86fc; color: #000; }

#connection-picker {
    top: 50%; left: 50%; transform: translate(-50%, -50%);
    padding: 20px; border: 1px solid #bb86fc; max-height: 300px; overflow-y: auto;
    box-shadow: 0 0 50px rgba(0,0,0,0.8); z-index: 6000;
}
.picker-option { padding: 10px; border-bottom: 1px solid #333; cursor: pointer; color: #e0e0e0;}
.picker-option:hover { background: #333; }

/* --- MODAL EDITOR (Janela de Edição) --- */
.modal-overlay {
    display: none; /* Começa escondido */
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.7); /* Fundo escurecido transparente */
    z-index: 9000; /* Fica acima de absolutamente tudo */
    align-items: center; justify-content: center;
}

/* Quando ativado via JS, muda para flex para centralizar */
.modal-overlay.active { display: flex; }

.modal-content {
    background: #1e1e1e; padding: 25px; border-radius: 12px;
    width: 400px; border: 1px solid #bb86fc;
    box-shadow: 0 10px 30px rgba(0,0,0,0.8);
    display: flex; flex-direction: column; gap: 15px;
}

.modal-content h3 { margin: 0; color: #bb86fc; }

/* Estilos dos Inputs */
#editor-title-input {
    background: #2c2c2c; border: 1px solid #444; color: #fff;
    padding: 10px; border-radius: 6px; font-size: 1.1rem; outline: none;
}

#editor-body-input {
    background: #2c2c2c; border: 1px solid #444; color: #aaa;
    padding: 10px; border-radius: 6px; font-size: 0.9rem;
    height: 150px; resize: none; outline: none; font-family: sans-serif;
}

/* Botões do rodapé do modal */
.modal-buttons { display: flex; justify-content: flex-end; gap: 10px; }

.btn-save { background: #bb86fc; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-weight: bold; color: #000;}
.btn-save:hover { background: #9a67ea; }

.btn-cancel { background: transparent; border: 1px solid #555; color: #fff; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
.btn-cancel:hover { background: #333; }
